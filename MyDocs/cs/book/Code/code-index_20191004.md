“这本书其实是讲述计算机如何工作的”  

[原书勘误](勘误.md)

抛出问题：  

1. 存储器和内存区别  
2. Mac程序为何不能再Win上运行  



### 基础实现

众所周知，计算机是电器，用电路制成，基于[电路基本概念](电设备/电路基本概念.md)



如果想用一个电路表示一种逻辑，即输入条件，再输出结果  

可视化的操作就是，通过开关表示条件是成立还是不成立 (并联、串联实现条件的或、与  )，通过灯泡亮灭知道结果是否成立。<br>

如果条件过多，如[猫的需求](./猫的需求.md)  

那么需要多个开关，而且电路也相当复杂。 

此时可以用**[代数](代数.md)**优化电路（减少条件中操作符的数量，就是减少开关）

优化后的条件表明，有7个操作符，即7个  

然而代数的“事物”表示法还是太过复杂  



基于编码 [摩尔斯电码](莫尔斯电码.md) 、[布莱叶盲文](布莱叶盲文.md) 、[数的制式](数的制式/其他进制.md) 可以知道

> 如胶卷的DX编码/ASA等级、[商品的UPC编码](UPC原理.md)    

对于二进制编码而言，"猫的需求" 3个开关应该就足够。但是为了开关意义的一致性（容易理解），我们一般用4个开关，其中一个表示公母，一个表示是否绝育，两个表示三个颜色和其他颜色  

如此电路具体要如何实现呢，看下[逻辑门](电设备/电路升级1.md) 应该就有数了（具体实现在p126页）



### 加减法器

有了上述实践，向[加法器](加法器.md)迈进

然后是[二数减法器](减法器)



---

探究加减法器的实现之后

对于实现方式总是针对 8 位的数，是否有些疑惑呢

事实上使用8位，而不是7、9位等其他位，仅仅只是因为 历史上使用8位进行电路实现非常方便，优雅无误

但是8位二进制不能很快的转化成容易理解的十进制数。

在8位的基础上，为了展示和拆分方便，选取了4位bit一组，即16进制。



### 计算器

自动加法器 篇指出 

1、每次计算都有结果值溢出的危险。

2、计数器 无法终止计数，所以RAM中的数其实只能进行“一次计算”，而且计算会因为计数的溢出而被破坏。

[操作指令](操作指令.md) 用来解决这些问题



结合操作指令、加法器 之后产生的 **计算器**，依旧有不少缺点，比如

1、16位数拆分之后，为了得到最后结果，还得腾出中间的单元 来存储中间结果。

2、计算寻址每次都从地址0开始，顺序增加，如此导致数据不能被重复使用。



此时对存储方式进行优化，将 指令 编码拓展为3个字节，第一个字节为指令 本身编码；另外两个字节用来存储 16位存储器的 单元地址，即需要执行 指令所对应的数据 的地址。

如此，能解决1问题（不再需要中间单元，直接把结果输出到临近的单元即可）

如此，能解决2问题，通过 地址非线形寻址 便能做到 代码片 的重复使用。（指令 的连接顺序，也可以修改）



### 计算机

如计算器优化，

地址的选取被 新的指令 替代，不再需要振荡器自动选址，也意味着存储RAM 和 指令RAM 可以合并在一起。  

但是合并到一处又有了新的问题，在两个指令集 需要拓展合并的时候，会无法适应，从而添加了指令**Jump** 30h

> 具体也不细数，看原文即可，p236



有了jump之后，我们回头看问题2的解决方法，是不是又可以节省很多 预置 步骤，来达到复用的目的。

当然关键在于用 “零锁存器” 改进后的 条件跳转（conditional jump），有 **Jump If Not Zero** 等



有了复用操作（或称为循环looping），此设备已经可以被称作 **计算机** 来

#### 组件

处理器，存储器，输入/输出设备

ALU

#### 概念

操作指令，即能够被处理器响应的预置 编码，又被称作机器码/机器语言，

而后为了方便人描述和理解、编写，有了 [汇编](汇编.md)



### 计数历史

对数表，差分机

图灵论文：1937年，提出“可计算性”，分析计算机可以做到什么，不能做到什么；另一篇则是图灵测试

克劳德·香农 论文：“通信过程中的代数理论” （A Mathematical theory of communication）

控制论（cybernetics： 源于希腊语舵手）-- 大众文化中，cyber 前缀用来表示和计算机相关的一切

晶体管

集成电路：integration；SSI、MSI... SLSI、ULSI

TTL，晶体管-晶体管逻辑，transistor-transistor logic；

- Vcc ：电压输入端，c表示collector
- Gnd：接地，ground
- Nc：无连接，no connection
- 《TTL数据手册》

CMOS，互补金属氧化物半导体，complementary metal-oxide semiconductor：



### 微处理器

介绍了8080的很多指令和作用

> 引用原文一句：除非准备用该芯片搭建一台计算机，否则最好不要在这些控制信号上过多花时间。

但是简单看下来，应当明白，为什么 乘法操作 不如 直接使用 位移 运算。（当然你可能在计算机章节就理解了）

**BCD码**



#### 堆栈

大量实践证明，在计算机中使用堆栈技术是十分方便的。

堆栈其实就是一段普通的RAM 存储空间，只是这段空间相对独立不另作他用。数据存入堆栈，叫做push；堆栈取出数据，叫做pop。

8080连接的存储器，正常数据会从0000h开始存储，而堆栈push的时候，会将指针减1变为ffffh，即从存储器最后开始。如此可以尽量避免堆栈上溢。

#### 非顺序

jump，branch，goto

call，return（子程序的实现基础）



**新的编码**

ASCII码和字符转换、EBCDIC、IBM打孔卡、第1号拉丁字母表、Shift-JIS、DBCS、Unicode



### 总线

总之大部分计算机是模块化的，需要一个中枢进行通信。

理解 挂载

S-100、MCA、EISA

SRAM、DRAM

图形适配器、磁介质存储器

### 操作系统

> **总线 和 操作系统** 部分看的比较快速，原文划了些概念，没有深究
>
> 后续学到底层再补吧



#### 备注：

拆分机、分析引擎

数字计算机、信号计算机