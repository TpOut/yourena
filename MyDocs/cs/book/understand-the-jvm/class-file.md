Jvm 的无关性在于class 文件

任何一个Class文件都对应着唯一的一个类或接口的定义信息（package-info.class\ module-info.class 这些则属于反例，只有描述信息），但是反过来说，类或接口并不一定都得定义在文件里（譬如类或接口也可以动态生成，直接送入类加载器中）。笔者只是通俗地将任意一个有效的类或接口所应当满足的格式称为“Class文件格式”，实际上它完全不需要以磁盘文件的形式存在。

Class文件是一组以8个字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑地排列在文件之中，中间没有添加任何分隔符，这使得整个Class文件中存储的内容几乎全部是程序运行的必要数据，没有空隙存在。当遇到需要占用8个字节以上空间的数据项时，则会按照高位在前[插图]的方式分割成若干个8个字节进行存储。



- 无符号数

属于基本的数据类型，以u1、u2、u4、u8来分别代表1个字节、2个字节、4个字节和8个字节的无符号数，无符号数可以用来描述数字、索引引用、数量值或者按照UTF-8编码构成字符串值。

- 表

由多个无符号数或者其他表作为数据项构成的复合数据类型，为了便于区分，所有表的命名都习惯性地以“_info”结尾。表用于描述有层次关系的复合结构的数据，整个Class文件本质上也可以视作是一张表，按严格顺序排列构成。



- 魔数与Class文件的版本

- 常量池中主要存放两大类常量：字面量（Literal）和符号引用（Symbolic References）

    - 符号引用

        被模块导出或者开放的包（Package）；类和接口的全限定名（Fully Qualified Name）；字段的名称和描述符（Descriptor）；方法的名称和描述符；方法句柄和方法类型（Method Handle、Method Type、Invoke Dynamic）；动态调用点和动态常量（Dynamically-Computed Call Site、Dynamically-ComputedConstant）

- 访问标志

- 类索引、父类索引、接口索引集合

- 字段表、方法表

    基本数据类型描述符，对象是 L，boolean 是Z，其他的都是首字母大写。

- 属性表

    Class文件、字段表、方法表都可以携带自己的属性表集合。每个属性值的名称都存放在常量池中

    - Code属性<font color=red>这里字节码实例没看明白，顺序不一样啊</font>， 变量槽



javap可以直接解析class文件

`javap -verbose TestClass`

UTF-8缩略编码



